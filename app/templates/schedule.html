{% extends "base_generic.html" %}
{% load crispy_forms_tags %}
{% block content %}

<h2>Schedule</h2>
<h5>To change some field just click by the cell</h5>

<table id="schedule_table" class="table table-bordered" role="grid">
	<thead>
		<tr>
			<th scope="col">Facility</th>
		    <th scope="col">Areas</th>
		    <th scope="col">Date</th>
		</tr>
	</thead>
	<tbody class="table-hover">
	  	{% for ex in excursions %}
	  		<tr role="row" class="odd">
	  			<a class="btn-link" href="get_excursion/{{ ex.id_excursion }}/">View</a>
				<td id="id_facility">{{ ex.id_facility_id }}</td>
				<td id="id_area">
				{% for area in ex.areas %}
					{{ area }}
				{% endfor %}
				</td>
				<td id="date_excursion" scope="row">{{ ex.date_excursion }}</td>
			</tr>
		{% endfor %}
	  </tbody>
</table>


<!-- Modal Show-->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div style="padding:20px 50px; background-color: #f0ad4e">
          <h4><span class="glyphicon glyphicon-eye-open"></span> View full information about the excursion</h4>
        </div>

        <div id="excursion_info">
        </div>
        
	    <div class="modal-footer">
	      <button type="submit" id="bt_cancel" class="btn btn-danger btn-default pull-left" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> Cancel</button>
	      <button type="submit" id="bt_submit" class="btn btn-success btn-default pull-right"><span class="glyphicon glyphicon-ok"></span> Submit</button>
	    </div>
	  </div>
      
    </div>
  </div> 

<script type="text/javascript">
 
$(document).ready(function() {

	$('#schedule_table').DataTable();
})

$("#schedule_table").on("click", "tr", function() {

	

	$("#myModal").modal();

    $("#bt_submit").on("click", function(){
    	$("#myModal").modal("hide");
	})
});

//$("#bt_change_ex").on("click", function(){
	//$.ajax ({
        //url: "update_excursion/",
        //type: "post",
        //data: {
        	//csrfmiddlewaretoken: getCookie('csrftoken'),
        	//'id_excursion': 
            //'name_organizator': $("#name_organizator"),
            //'occasion_excursion': $("#occasion_excursion"),
            //'time_period_excursion': $("#time_period_excursion"),
            //'language_excursion': $("#language_excursion"),
            //'auditory_excursion': $("#auditory_excursion"),
            //'participants_excursion': $("#participants_excursion"),
            //'age_excursion': $("#age_excursion"),
        //},
        //success: function(data) {
        	//alert('Excursion has been changed!');
		//},
		//error: function(xhr, ajaxOptions, thrownError) {
            //console.log(xhr.status);
            //console.log(xhr.responseText);
            //console.log(thrownError);
        //},
	//});


function getCookie(name){
	var cookieValue = null;
	if (document.cookie && document.cookie !== '') {
	    var cookies = document.cookie.split(';');
	    for (var i = 0; i < cookies.length; i++) {
	        var cookie = jQuery.trim(cookies[i]);
	        // Does this cookie string begin with the name we want?
	        if (cookie.substring(0, name.length + 1) === (name + '=')) {
	            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
	            break;
	        }
	    }
    }
    return cookieValue;
}
</script>

{% endblock %}